var RiseVision=RiseVision||{};RiseVision.WorldClock={};RiseVision.WorldClock.Settings={};RiseVision.WorldClock.Settings=function(){this.settings=new RiseVision.Common.Settings};
RiseVision.WorldClock.Settings.prototype.init=function(){var c=this;$("<option>").val("12-hour-seconds").text((new Date).toString("h:mm:ss tt")).attr("selected","selected").appendTo("#format");$("<option>").val("12-hour").text((new Date).toString("h:mm tt")).appendTo("#format");$("<option>").val("24-hour-seconds").text((new Date).toString("H:mm:ss")).appendTo("#format");$("<option>").val("24-hour").text((new Date).toString("H:mm")).appendTo("#format");$("label[for='use-local-time'], label[for='show-title'], label[for='placement'], label[for='padding']").on("click",
function(){$(this).popover("toggle")});$("#placement").change(function(){var b=$(this).val();"top"==b||"bottom"==b?($("div.halign").show(),$("div.valign").hide()):($("div.halign").hide(),$("div.valign").show())});$("input:checkbox").change(function(){"use-local-time"==$(this).val()?$(this).is(":checked")?$("div.time-zone").hide():($("div.time-zone").show(),$("#time-zone").focus()):"show-title"==$(this).val()?$(this).is(":checked")?($("div.title").show(),$("#title").focus()):$("div.title").hide():
"show-second-hand"==$(this).val()&&($(this).is(":checked")?$("div.second-hand").show():$("div.second-hand").hide())});$("input[name='clock-type']").change(function(){var b=$(this).val();$(this).is(":checked")&&("analog"==b?($("div.analog").show(),$("div.digital").hide()):($("div.analog").hide(),$("div.digital").show()))});$("#save").on("click",function(){c.getSettings()});$("#cancel, #settings-close").on("click",function(){gadgets.rpc.call("","rscmd_closeSettings",null)});$("#help").on("click",function(){window.open("http://www.risevision.com/help/users/what-are-gadgets/free-gadgets/rise-vision-world-clock/",
"_blank")});$(".alert").hide();gadgets.rpc.call("","rscmd_getAdditionalParams",function(b){if(b){var a=new gadgets.Prefs;b=JSON.parse(b);c.result=b;$("#use-local-time").attr("checked",a.getBool("use-local-time"));$("#time-zone").val(a.getString("time-zone"));$("#show-title").attr("checked",a.getBool("show-title"));$("#title").val(a.getString("title"));$("#placement").val(a.getString("placement"));$("#padding").val(a.getInt("padding"));$("#horizontal-align").val(a.getString("horizontal-align"));$("#vertical-align").val(a.getString("vertical-align"));
$("#frame-color").val(a.getString("frame-color"));$("#face-color").val(a.getString("face-color"));$("#hand-color").val(a.getString("hand-color"));$("#frame-width").val(a.getInt("frame-width"));$("#hour-tick-width").val(a.getInt("hour-tick-width"));$("#minute-tick-width").val(a.getInt("minute-tick-width"));$("#hand-width").val(a.getInt("hand-width"));$("#show-second-hand").attr("checked",a.getBool("show-second-hand"));$("#second-hand-color").val(a.getString("second-hand-color"));$("#second-hand-width").val(a.getInt("second-hand-width"));
$("#format").val(a.getString("format"));$("input[type='radio'][name='clock-type']").each(function(){$(this).val()==a.getString("clock-type")&&$(this).attr("checked","checked")});$("#title-font").fontPicker({"i18n-prefix":"title-font",defaults:{font:b["title-font"],"font-url":b["title-font-url"],"font-size":b["title-font-size"],"is-bold":b["title-bold"],"is-italic":b["title-italic"],color:b["title-color"]}});$("#numbers-font").fontPicker({"i18n-prefix":"numbers-font",defaults:{font:b["numbers-font"],
"font-url":b["numbers-font-url"],"font-size":b["numbers-font-size"],"is-bold":b["numbers-bold"],"is-italic":b["numbers-italic"],color:b["numbers-color"]}});$("#digital-font").fontPicker({"i18n-prefix":"digital-font",defaults:{font:b["digital-font"],"font-url":b["digital-font-url"],"is-bold":b["digital-bold"],"is-italic":b["digital-italic"],color:b["digital-color"]}});$("#frame-color").fontPicker({"i18n-prefix":"frame-color",defaults:{color:a.getString("frame-color")}});$("#face-color").fontPicker({"i18n-prefix":"face-color",
defaults:{color:a.getString("face-color")}});$("#hand-color").fontPicker({"i18n-prefix":"hand-color",defaults:{color:a.getString("hand-color")}});$("#second-hand-color").fontPicker({"i18n-prefix":"second-hand-color",defaults:{color:a.getString("second-hand-color")}});$("#background-color").fontPicker({"i18n-prefix":"background-color",defaults:{color:a.getString("background-color")}})}else $("#title-font").fontPicker({"i18n-prefix":"title-font"}),$("#numbers-font").fontPicker({"i18n-prefix":"numbers-font",
defaults:{"font-size":"48"}}),$("#digital-font").fontPicker({"i18n-prefix":"digital-font",visibility:{"font-size":!1}}),$("#frame-color").fontPicker({"i18n-prefix":"frame-color",visibility:{font:!1,"font-size":!1,variants:!1,text:!1}}),$("#face-color").fontPicker({"i18n-prefix":"face-color",defaults:{color:"rgba(255, 255, 255, 1)"},visibility:{font:!1,"font-size":!1,variants:!1,text:!1}}),$("#hand-color").fontPicker({"i18n-prefix":"hand-color",visibility:{font:!1,"font-size":!1,variants:!1,text:!1}}),
$("#second-hand-color").fontPicker({"i18n-prefix":"second-hand-color",defaults:{color:"rgba(255, 0, 0, 1)"},visibility:{font:!1,"font-size":!1,variants:!1,text:!1}}),$("#background-color").fontPicker({"i18n-prefix":"background-color",defaults:{color:""},visibility:{font:!1,"font-size":!1,variants:!1,text:!1}});$("[data-toggle='popover']").popover({trigger:"manual"});$("input:checkbox").trigger("change");$("input[name='clock-type']").trigger("change");$("#placement").trigger("change");i18n.init({fallbackLng:"en"},
function(a){$(".widget-wrapper").i18n().show();$(".form-control").selectpicker();$(".sticky-buttons").sticky({container:$(".widget-wrapper"),topSpacing:41,getWidthFrom:$(".widget-wrapper")})})})};
RiseVision.WorldClock.Settings.prototype.getSettings=function(){var c=document.getElementById("settings-alert"),b=!1,a="",a=null,d=0;$("#settings-alert").empty();b=clock.settings.validateRequired($("#title"),c,"Title")?!0:b;b=clock.settings.validateNumeric($("#padding"),c,"Padding")?!0:b;b=clock.settings.validateNumeric($("#frame-width"),c,"Frame Width")?!0:b;b=clock.settings.validateNumeric($("#hour-tick-width"),c,"Hour Tick Width")?!0:b;b=clock.settings.validateNumeric($("#minute-tick-width"),c,
"Minute Tick Width")?!0:b;b=clock.settings.validateNumeric($("#hand-width"),c,"Hour / Minute Hand Width")?!0:b;(b=clock.settings.validateNumeric($("#second-hand-width"),c,"Second Hand Width")?!0:b)?$(".alert").show():(a=$("#use-local-time").is(":checked")?"up_use-local-time=true":"up_use-local-time=false",a+="&up_time-zone="+$("#time-zone").val(),a+=$("#show-title").is(":checked")?"&up_show-title=true":"&up_show-title=false",a+="&up_title="+$("#title").val()+"&up_placement="+$("#placement").val(),
a+=""==$("#padding").val()?"&up_padding=0":"&up_padding= "+$("#padding").val(),a+="&up_horizontal-align="+$("#horizontal-align").val()+"&up_vertical-align="+$("#vertical-align").val(),d=$("input[type='radio'][name='clock-type']:checked"),0<d.length&&(a+="&up_clock-type="+d.val()),a+="&up_frame-color="+$("#frame-color").data("font-picker").getColor()+"&up_face-color="+$("#face-color").data("font-picker").getColor()+"&up_hand-color="+$("#hand-color").data("font-picker").getColor(),a+=$("#show-second-hand").is(":checked")?
"&up_show-second-hand=true":"&up_show-second-hand=false",a+="&up_second-hand-color="+$("#second-hand-color").data("font-picker").getColor()+"&up_frame-width="+$("#frame-width").val()+"&up_hour-tick-width="+$("#hour-tick-width").val()+"&up_minute-tick-width="+$("#minute-tick-width").val()+"&up_hand-width="+$("#hand-width").val()+"&up_second-hand-width="+$("#second-hand-width").val()+"&up_format="+$("#format").val()+"&up_background-color="+$("#background-color").data("font-picker").getColor(),a={params:a,
additionalParams:JSON.stringify(clock.saveAdditionalParams())},$(".alert").hide(),gadgets.rpc.call("","rscmd_saveSettings",null,a))};
RiseVision.WorldClock.Settings.prototype.saveAdditionalParams=function(){var c={},b=$("#title-font").data("font-picker"),a=$("#numbers-font").data("font-picker"),d=$("#digital-font").data("font-picker");c["title-font"]=b.getFont();c["title-font-style"]=b.getFontStyle();c["title-font-url"]=b.getFontURL();c["title-font-size"]=b.getFontSize();c["title-bold"]=b.getBold();c["title-italic"]=b.getItalic();c["title-color"]=b.getColor();c["numbers-font"]=a.getFont();c["numbers-font-style"]=a.getFontStyle();
c["numbers-font-url"]=a.getFontURL();c["numbers-font-size"]=a.getFontSize();c["numbers-bold"]=a.getBold();c["numbers-italic"]=a.getItalic();c["numbers-color"]=a.getColor();c["digital-font"]=d.getFont();c["digital-font-style"]=d.getFontStyle();c["digital-font-url"]=d.getFontURL();c["digital-bold"]=d.getBold();c["digital-italic"]=d.getItalic();c["digital-color"]=d.getColor();return c};